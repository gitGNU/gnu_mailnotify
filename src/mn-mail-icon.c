/* Generated by GOB (v2.0.9) on Thu Aug 19 00:41:31 2004
   (do not edit directly) */

/* End world hunger, donate to the World Food Programme, http://www.wfp.org */

#define GOB_VERSION_MAJOR 2
#define GOB_VERSION_MINOR 0
#define GOB_VERSION_PATCHLEVEL 9

#define selfp (self->_priv)

#include <string.h> /* memset() */

#include "mn-mail-icon.h"

#include "mn-mail-icon-private.h"

#ifdef G_LIKELY
#define ___GOB_LIKELY(expr) G_LIKELY(expr)
#define ___GOB_UNLIKELY(expr) G_UNLIKELY(expr)
#else /* ! G_LIKELY */
#define ___GOB_LIKELY(expr) (expr)
#define ___GOB_UNLIKELY(expr) (expr)
#endif /* G_LIKELY */

#line 24 "mn-mail-icon.gob"

#include "config.h"
#include <gdk/gdkkeysyms.h>
#include <gnome.h>
#include "mn-stock.h"
#include "mn-util.h"

#line 35 "mn-mail-icon.c"
/* self casting macros */
#define SELF(x) MN_MAIL_ICON(x)
#define SELF_CONST(x) MN_MAIL_ICON_CONST(x)
#define IS_SELF(x) MN_IS_MAIL_ICON(x)
#define TYPE_SELF MN_TYPE_MAIL_ICON
#define SELF_CLASS(x) MN_MAIL_ICON_CLASS(x)

#define SELF_GET_CLASS(x) MN_MAIL_ICON_GET_CLASS(x)

/* self typedefs */
typedef MNMailIcon Self;
typedef MNMailIconClass SelfClass;

/* here are local prototypes */
static void mn_mail_icon_activate (MNMailIcon * self) G_GNUC_UNUSED;
static void mn_mail_icon_activate_run (MNMailIcon * self) G_GNUC_UNUSED;
static void mn_mail_icon_activate_update (MNMailIcon * self) G_GNUC_UNUSED;
static void mn_mail_icon_activate_properties (MNMailIcon * self) G_GNUC_UNUSED;
static void mn_mail_icon_activate_help (MNMailIcon * self) G_GNUC_UNUSED;
static void mn_mail_icon_activate_about (MNMailIcon * self) G_GNUC_UNUSED;
static void mn_mail_icon_activate_remove (MNMailIcon * self) G_GNUC_UNUSED;
static void mn_mail_icon_class_init (MNMailIconClass * class) G_GNUC_UNUSED;
static void mn_mail_icon_init (MNMailIcon * self) G_GNUC_UNUSED;
static gboolean mn_mail_icon_button_press_event_h (GtkWidget * widget, GdkEventButton * event, gpointer user_data) G_GNUC_UNUSED;
static gboolean mn_mail_icon_button_release_event_h (GtkWidget * widget, GdkEventButton * event, gpointer user_data) G_GNUC_UNUSED;
static gboolean mn_mail_icon_popup_menu_h (GtkWidget * widget, gpointer user_data) G_GNUC_UNUSED;

/*
 * Signal connection wrapper macro shortcuts
 */
#define self_connect__activate(object,func,data)	mn_mail_icon_connect__activate((object),(func),(data))
#define self_connect_after__activate(object,func,data)	mn_mail_icon_connect_after__activate((object),(func),(data))
#define self_connect_data__activate(object,func,data,destroy_data,flags)	mn_mail_icon_connect_data__activate((object),(func),(data),(destroy_data),(flags))
#define self_connect__activate_run(object,func,data)	mn_mail_icon_connect__activate_run((object),(func),(data))
#define self_connect_after__activate_run(object,func,data)	mn_mail_icon_connect_after__activate_run((object),(func),(data))
#define self_connect_data__activate_run(object,func,data,destroy_data,flags)	mn_mail_icon_connect_data__activate_run((object),(func),(data),(destroy_data),(flags))
#define self_connect__activate_update(object,func,data)	mn_mail_icon_connect__activate_update((object),(func),(data))
#define self_connect_after__activate_update(object,func,data)	mn_mail_icon_connect_after__activate_update((object),(func),(data))
#define self_connect_data__activate_update(object,func,data,destroy_data,flags)	mn_mail_icon_connect_data__activate_update((object),(func),(data),(destroy_data),(flags))
#define self_connect__activate_properties(object,func,data)	mn_mail_icon_connect__activate_properties((object),(func),(data))
#define self_connect_after__activate_properties(object,func,data)	mn_mail_icon_connect_after__activate_properties((object),(func),(data))
#define self_connect_data__activate_properties(object,func,data,destroy_data,flags)	mn_mail_icon_connect_data__activate_properties((object),(func),(data),(destroy_data),(flags))
#define self_connect__activate_help(object,func,data)	mn_mail_icon_connect__activate_help((object),(func),(data))
#define self_connect_after__activate_help(object,func,data)	mn_mail_icon_connect_after__activate_help((object),(func),(data))
#define self_connect_data__activate_help(object,func,data,destroy_data,flags)	mn_mail_icon_connect_data__activate_help((object),(func),(data),(destroy_data),(flags))
#define self_connect__activate_about(object,func,data)	mn_mail_icon_connect__activate_about((object),(func),(data))
#define self_connect_after__activate_about(object,func,data)	mn_mail_icon_connect_after__activate_about((object),(func),(data))
#define self_connect_data__activate_about(object,func,data,destroy_data,flags)	mn_mail_icon_connect_data__activate_about((object),(func),(data),(destroy_data),(flags))
#define self_connect__activate_remove(object,func,data)	mn_mail_icon_connect__activate_remove((object),(func),(data))
#define self_connect_after__activate_remove(object,func,data)	mn_mail_icon_connect_after__activate_remove((object),(func),(data))
#define self_connect_data__activate_remove(object,func,data,destroy_data,flags)	mn_mail_icon_connect_data__activate_remove((object),(func),(data),(destroy_data),(flags))

enum {
	ACTIVATE_SIGNAL,
	ACTIVATE_RUN_SIGNAL,
	ACTIVATE_UPDATE_SIGNAL,
	ACTIVATE_PROPERTIES_SIGNAL,
	ACTIVATE_HELP_SIGNAL,
	ACTIVATE_ABOUT_SIGNAL,
	ACTIVATE_REMOVE_SIGNAL,
	LAST_SIGNAL
};

static guint object_signals[LAST_SIGNAL] = {0};

/* pointer to the class of our parent */
static EggTrayIconClass *parent_class = NULL;

/* Short form macros */
#define self_activate mn_mail_icon_activate
#define self_activate_run mn_mail_icon_activate_run
#define self_activate_update mn_mail_icon_activate_update
#define self_activate_properties mn_mail_icon_activate_properties
#define self_activate_help mn_mail_icon_activate_help
#define self_activate_about mn_mail_icon_activate_about
#define self_activate_remove mn_mail_icon_activate_remove
#define self_button_press_event_h mn_mail_icon_button_press_event_h
#define self_button_release_event_h mn_mail_icon_button_release_event_h
#define self_popup_menu_h mn_mail_icon_popup_menu_h
#define self_new mn_mail_icon_new
#define self_set_command mn_mail_icon_set_command
GType
mn_mail_icon_get_type (void)
{
	static GType type = 0;

	if ___GOB_UNLIKELY(type == 0) {
		static const GTypeInfo info = {
			sizeof (MNMailIconClass),
			(GBaseInitFunc) NULL,
			(GBaseFinalizeFunc) NULL,
			(GClassInitFunc) mn_mail_icon_class_init,
			(GClassFinalizeFunc) NULL,
			NULL /* class_data */,
			sizeof (MNMailIcon),
			0 /* n_preallocs */,
			(GInstanceInitFunc) mn_mail_icon_init,
			NULL
		};

		type = g_type_register_static (EGG_TYPE_TRAY_ICON, "MNMailIcon", &info, (GTypeFlags)0);
	}

	return type;
}

/* a macro for creating a new object of our type */
#define GET_NEW ((MNMailIcon *)g_object_new(mn_mail_icon_get_type(), NULL))

/* a function for creating a new object of our type */
#include <stdarg.h>
static MNMailIcon * GET_NEW_VARG (const char *first, ...) G_GNUC_UNUSED;
static MNMailIcon *
GET_NEW_VARG (const char *first, ...)
{
	MNMailIcon *ret;
	va_list ap;
	va_start (ap, first);
	ret = (MNMailIcon *)g_object_new_valist (mn_mail_icon_get_type (), first, ap);
	va_end (ap);
	return ret;
}


static void
___dispose (GObject *obj_self)
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::dispose"
	MNMailIcon *self G_GNUC_UNUSED = MN_MAIL_ICON (obj_self);
	if (G_OBJECT_CLASS (parent_class)->dispose) \
		(* G_OBJECT_CLASS (parent_class)->dispose) (obj_self);
#line 34 "mn-mail-icon.gob"
	if(self->tooltips) { ((*(void (*)(void *))g_object_unref)) (self->tooltips); self->tooltips = NULL; }
#line 169 "mn-mail-icon.c"
}
#undef __GOB_FUNCTION__


static void
___finalize(GObject *obj_self)
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::finalize"
	MNMailIcon *self  G_GNUC_UNUSED = MN_MAIL_ICON (obj_self);
	gpointer priv = self->_priv;
	if(G_OBJECT_CLASS(parent_class)->finalize) \
		(* G_OBJECT_CLASS(parent_class)->finalize)(obj_self);
#line 37 "mn-mail-icon.gob"
	if(self->_priv->menu) { ((*(void (*)(void *))gtk_widget_destroy)) (self->_priv->menu); self->_priv->menu = NULL; }
#line 184 "mn-mail-icon.c"
	g_free (priv);
}
#undef __GOB_FUNCTION__

#line 56 "mn-mail-icon.gob"
static void 
mn_mail_icon_class_init (MNMailIconClass * class G_GNUC_UNUSED)
#line 192 "mn-mail-icon.c"
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::class_init"
	GObjectClass *g_object_class G_GNUC_UNUSED = (GObjectClass*) class;

	parent_class = g_type_class_ref (EGG_TYPE_TRAY_ICON);

	object_signals[ACTIVATE_SIGNAL] =
		g_signal_new ("activate",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_LAST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (MNMailIconClass, activate),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);
	object_signals[ACTIVATE_RUN_SIGNAL] =
		g_signal_new ("activate_run",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_LAST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (MNMailIconClass, activate_run),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);
	object_signals[ACTIVATE_UPDATE_SIGNAL] =
		g_signal_new ("activate_update",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_LAST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (MNMailIconClass, activate_update),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);
	object_signals[ACTIVATE_PROPERTIES_SIGNAL] =
		g_signal_new ("activate_properties",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_LAST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (MNMailIconClass, activate_properties),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);
	object_signals[ACTIVATE_HELP_SIGNAL] =
		g_signal_new ("activate_help",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_LAST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (MNMailIconClass, activate_help),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);
	object_signals[ACTIVATE_ABOUT_SIGNAL] =
		g_signal_new ("activate_about",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_LAST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (MNMailIconClass, activate_about),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);
	object_signals[ACTIVATE_REMOVE_SIGNAL] =
		g_signal_new ("activate_remove",
			G_TYPE_FROM_CLASS (g_object_class),
			(GSignalFlags)(G_SIGNAL_RUN_LAST | G_SIGNAL_ACTION),
			G_STRUCT_OFFSET (MNMailIconClass, activate_remove),
			NULL, NULL,
			g_cclosure_marshal_VOID__VOID,
			G_TYPE_NONE, 0);

	class->activate = NULL;
	class->activate_run = NULL;
	class->activate_update = NULL;
	class->activate_properties = NULL;
	class->activate_help = NULL;
	class->activate_about = NULL;
	class->activate_remove = NULL;
	g_object_class->dispose = ___dispose;
	g_object_class->finalize = ___finalize;
 {
#line 57 "mn-mail-icon.gob"

    GtkBindingSet *binding_set;

    binding_set = gtk_binding_set_by_class(class);

    /* HIG 2.0 key bindings */

    gtk_binding_entry_add_signal(binding_set, GDK_space, 0, "activate", 0);

    gtk_binding_entry_add_signal(binding_set, GDK_Return, GDK_MOD1_MASK, "activate-properties", 0);
    gtk_binding_entry_add_signal(binding_set, GDK_ISO_Enter, GDK_MOD1_MASK, "activate-properties", 0);
    gtk_binding_entry_add_signal(binding_set, GDK_KP_Enter, GDK_MOD1_MASK, "activate-properties", 0);
  
#line 280 "mn-mail-icon.c"
 }
}
#undef __GOB_FUNCTION__
#line 71 "mn-mail-icon.gob"
static void 
mn_mail_icon_init (MNMailIcon * self G_GNUC_UNUSED)
#line 287 "mn-mail-icon.c"
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::init"
	self->_priv = g_new0 (MNMailIconPrivate, 1);
#line 34 "mn-mail-icon.gob"
	self->tooltips = mn_tooltips_new();
#line 293 "mn-mail-icon.c"
#line 35 "mn-mail-icon.gob"
	self->image = mn_blinking_image_new_from_stock(MN_STOCK_MAIL, GTK_ICON_SIZE_LARGE_TOOLBAR);
#line 296 "mn-mail-icon.c"
#line 37 "mn-mail-icon.gob"
	self->_priv->menu = gtk_menu_new();
#line 299 "mn-mail-icon.c"
 {
#line 72 "mn-mail-icon.gob"

    GtkMenuShell *shell;
    GtkWidget *event_box;
    GtkWidget *properties_item;
    GtkWidget *help_item;
    GtkWidget *about_item;
    GtkWidget *remove_item;
    
    shell = GTK_MENU_SHELL(selfp->menu);
    self->update_item = mn_menu_shell_append(shell, GTK_STOCK_REFRESH, _("_Update"));
    mn_menu_shell_append(shell, NULL, NULL);
    properties_item = mn_menu_shell_append(shell, GTK_STOCK_PROPERTIES, NULL);
    help_item = mn_menu_shell_append(shell, GTK_STOCK_HELP, NULL);
    about_item = mn_menu_shell_append(shell, GNOME_STOCK_ABOUT, NULL);
    mn_menu_shell_append(shell, NULL, NULL);
    remove_item = mn_menu_shell_append(shell, GTK_STOCK_REMOVE, _("R_emove From Notification Area"));
    
    g_signal_connect_swapped(G_OBJECT(self->update_item), "activate", G_CALLBACK(self_activate_update), self);
    g_signal_connect_swapped(G_OBJECT(properties_item), "activate", G_CALLBACK(self_activate_properties), self);
    g_signal_connect_swapped(G_OBJECT(help_item), "activate", G_CALLBACK(self_activate_help), self);
    g_signal_connect_swapped(G_OBJECT(about_item), "activate", G_CALLBACK(self_activate_about), self);
    g_signal_connect_swapped(G_OBJECT(remove_item), "activate", G_CALLBACK(self_activate_remove), self);

    event_box = gtk_event_box_new();
    GTK_WIDGET_SET_FLAGS(event_box, GTK_CAN_FOCUS);
    mn_setup_dnd(event_box);

    gtk_container_add(GTK_CONTAINER(event_box), self->image);
    gtk_container_add(GTK_CONTAINER(self), event_box);
  
    g_signal_connect(G_OBJECT(event_box), "button-press-event",
		     G_CALLBACK(self_button_press_event_h), self);
    g_signal_connect(G_OBJECT(event_box), "button-release-event",
		     G_CALLBACK(self_button_release_event_h), self);
    g_signal_connect(G_OBJECT(event_box), "popup-menu",
		     G_CALLBACK(self_popup_menu_h), self);

    gtk_widget_show(self->image);
    gtk_widget_show(event_box);
  
#line 342 "mn-mail-icon.c"
 }
}
#undef __GOB_FUNCTION__

#line 41 "mn-mail-icon.gob"
static void 
mn_mail_icon_activate (MNMailIcon * self)
#line 350 "mn-mail-icon.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 41 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 41 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 362 "mn-mail-icon.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[ACTIVATE_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}

#line 43 "mn-mail-icon.gob"
static void 
mn_mail_icon_activate_run (MNMailIcon * self)
#line 379 "mn-mail-icon.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 43 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 43 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 391 "mn-mail-icon.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[ACTIVATE_RUN_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}

#line 45 "mn-mail-icon.gob"
static void 
mn_mail_icon_activate_update (MNMailIcon * self)
#line 408 "mn-mail-icon.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 45 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 45 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 420 "mn-mail-icon.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[ACTIVATE_UPDATE_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}

#line 47 "mn-mail-icon.gob"
static void 
mn_mail_icon_activate_properties (MNMailIcon * self)
#line 437 "mn-mail-icon.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 47 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 47 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 449 "mn-mail-icon.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[ACTIVATE_PROPERTIES_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}

#line 49 "mn-mail-icon.gob"
static void 
mn_mail_icon_activate_help (MNMailIcon * self)
#line 466 "mn-mail-icon.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 49 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 49 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 478 "mn-mail-icon.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[ACTIVATE_HELP_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}

#line 51 "mn-mail-icon.gob"
static void 
mn_mail_icon_activate_about (MNMailIcon * self)
#line 495 "mn-mail-icon.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 51 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 51 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 507 "mn-mail-icon.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[ACTIVATE_ABOUT_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}

#line 53 "mn-mail-icon.gob"
static void 
mn_mail_icon_activate_remove (MNMailIcon * self)
#line 524 "mn-mail-icon.c"
{
	GValue ___param_values[1];
	GValue ___return_val;

memset (&___return_val, 0, sizeof (___return_val));
memset (&___param_values, 0, sizeof (___param_values));

#line 53 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 53 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 536 "mn-mail-icon.c"

	___param_values[0].g_type = 0;
	g_value_init (&___param_values[0], G_TYPE_FROM_INSTANCE (self));
	g_value_set_instance (&___param_values[0], (gpointer) self);

	g_signal_emitv (___param_values,
		object_signals[ACTIVATE_REMOVE_SIGNAL],
		0 /* detail */,
		&___return_val);

	g_value_unset (&___param_values[0]);
}



#line 113 "mn-mail-icon.gob"
static gboolean 
mn_mail_icon_button_press_event_h (GtkWidget * widget, GdkEventButton * event, gpointer user_data)
#line 555 "mn-mail-icon.c"
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::button_press_event_h"
#line 113 "mn-mail-icon.gob"
	g_return_val_if_fail (widget != NULL, (gboolean )0);
#line 113 "mn-mail-icon.gob"
	g_return_val_if_fail (GTK_IS_WIDGET (widget), (gboolean )0);
#line 113 "mn-mail-icon.gob"
	g_return_val_if_fail (event != NULL, (gboolean )0);
#line 113 "mn-mail-icon.gob"
	g_return_val_if_fail (user_data != NULL, (gboolean )0);
#line 566 "mn-mail-icon.c"
{
#line 117 "mn-mail-icon.gob"
	
    Self *self = user_data;

    if (event->button == 1 && event->type == GDK_2BUTTON_PRESS)
      self_activate(self);
    else if (event->button == 3)
      {
	gtk_menu_popup(GTK_MENU(selfp->menu), NULL, NULL, NULL, NULL, event->button, event->time);
	return TRUE;		/* do not propagate event */
      }

    return FALSE;		/* propagate event */
  }}
#line 582 "mn-mail-icon.c"
#undef __GOB_FUNCTION__

#line 131 "mn-mail-icon.gob"
static gboolean 
mn_mail_icon_button_release_event_h (GtkWidget * widget, GdkEventButton * event, gpointer user_data)
#line 588 "mn-mail-icon.c"
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::button_release_event_h"
#line 131 "mn-mail-icon.gob"
	g_return_val_if_fail (widget != NULL, (gboolean )0);
#line 131 "mn-mail-icon.gob"
	g_return_val_if_fail (GTK_IS_WIDGET (widget), (gboolean )0);
#line 131 "mn-mail-icon.gob"
	g_return_val_if_fail (event != NULL, (gboolean )0);
#line 131 "mn-mail-icon.gob"
	g_return_val_if_fail (user_data != NULL, (gboolean )0);
#line 599 "mn-mail-icon.c"
{
#line 135 "mn-mail-icon.gob"
	
    Self *self = user_data;

    if (event->button == 3)
      {
	gtk_menu_popdown(GTK_MENU(selfp->menu));
	return TRUE;		/* do not propagate event */
      }
    
    return FALSE;		/* propagate event */
  }}
#line 613 "mn-mail-icon.c"
#undef __GOB_FUNCTION__

#line 147 "mn-mail-icon.gob"
static gboolean 
mn_mail_icon_popup_menu_h (GtkWidget * widget, gpointer user_data)
#line 619 "mn-mail-icon.c"
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::popup_menu_h"
#line 147 "mn-mail-icon.gob"
	g_return_val_if_fail (widget != NULL, (gboolean )0);
#line 147 "mn-mail-icon.gob"
	g_return_val_if_fail (GTK_IS_WIDGET (widget), (gboolean )0);
#line 147 "mn-mail-icon.gob"
	g_return_val_if_fail (user_data != NULL, (gboolean )0);
#line 628 "mn-mail-icon.c"
{
#line 150 "mn-mail-icon.gob"
	
    Self *self = user_data;

    gtk_menu_popup(GTK_MENU(selfp->menu), NULL, NULL, NULL, NULL, 0, gtk_get_current_event_time());
    return TRUE;		/* a menu was activated */
  }}
#line 637 "mn-mail-icon.c"
#undef __GOB_FUNCTION__

#line 157 "mn-mail-icon.gob"
GtkWidget * 
mn_mail_icon_new (void)
#line 643 "mn-mail-icon.c"
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::new"
{
#line 159 "mn-mail-icon.gob"
	
    return g_object_new(TYPE_SELF, "title", _("Mail Notification"), NULL);
  }}
#line 651 "mn-mail-icon.c"
#undef __GOB_FUNCTION__

#line 163 "mn-mail-icon.gob"
void 
mn_mail_icon_set_command (MNMailIcon * self, const char * command)
#line 657 "mn-mail-icon.c"
{
#define __GOB_FUNCTION__ "MN:Mail:Icon::set_command"
#line 163 "mn-mail-icon.gob"
	g_return_if_fail (self != NULL);
#line 163 "mn-mail-icon.gob"
	g_return_if_fail (MN_IS_MAIL_ICON (self));
#line 664 "mn-mail-icon.c"
{
#line 165 "mn-mail-icon.gob"
	
    char *mnemonic;

    if (selfp->run_item)
      gtk_widget_destroy(selfp->run_item);

    mnemonic = command
      ? g_strdup_printf(_("_Run %s"), command)
      : g_strdup(_("_Run Default Action"));

    selfp->run_item = mn_menu_shell_prepend(GTK_MENU_SHELL(selfp->menu), GTK_STOCK_EXECUTE, mnemonic);
    g_free(mnemonic);

    gtk_widget_set_sensitive(selfp->run_item, command != NULL);
    g_signal_connect_swapped(G_OBJECT(selfp->run_item), "activate", G_CALLBACK(self_activate_run), self);
  }}
#line 683 "mn-mail-icon.c"
#undef __GOB_FUNCTION__
