<?xml version="1.0"?>
<makefile>
  <program name="mail-notification">
    <cppflags>$(WARN_CFLAGS)</cppflags>
    <cppflags>$(DEBUG_CFLAGS)</cppflags>
    <cppflags>-I$(top_srcdir)</cppflags>
    <cppflags>-DG_LOG_DOMAIN="\"$(PACKAGE)\""</cppflags>
    <cppflags>-DPREFIX="\"$(prefix)\""</cppflags>
    <cppflags>-DSYSCONFDIR="\"$(sysconfdir)\""</cppflags>
    <cppflags>-DDATADIR="\"$(datadir)\""</cppflags>
    <cppflags>-DLIBDIR="\"$(libdir)\""</cppflags>
    <cppflags>-DGNOMELOCALEDIR="\"$(datadir)/locale\""</cppflags>
    <cppflags>-DUIDIR="\"$(pkgdatadir)/ui\""</cppflags>

    <!-- We add the -export-dynamic flag (which libtool will translate into -->
    <!-- the proper linker flag) because libglade needs to resolve symbols -->
    <!-- from our own binary in order to autoconnect signal handlers. -->
    <ldflags>-export-dynamic</ldflags>

    <ldflags>$(INTLLIBS)</ldflags>

    <package name="gnome"/>

    <source name="mn-main.c"/>

    <module name="eggtrayicon"/>
    <module name="mn-conf"/>
    <module name="mn-locked-callback"/>
    <module name="mn-stock"/>
    <module name="mn-util"/>
    <module name="mn-vfs"/>
    <module name="mn-xml"/>
    <module name="nautilus-cell-renderer-pixbuf-emblem"/>

    <class name="MN:About:Dialog"/>
    <class name="MN:Autodetect:Mailbox:Properties"/>
    <class name="MN:Automation"/>
    <class name="MN:Blinking:Image"/>
    <class name="MN:Compact:Message:View"/>
    <class name="MN:Dialog"/>
    <class name="MN:Mail:Icon"/>
    <class name="MN:Mailbox"/>
    <class name="MN:Mailbox:Properties"/>
    <class name="MN:Mailbox:Properties:Dialog"/>
    <class name="MN:Mailbox:View"/>
    <class name="MN:Mailboxes"/>
    <class name="MN:Message"/>
    <class name="MN:Message:View"/>
    <class name="MN:Popup"/>
    <class name="MN:Popups"/>
    <class name="MN:Properties:Dialog"/>
    <class name="MN:Shell"/>
    <class name="MN:Standard:Message:View"/>
    <class name="MN:Test:Mailbox"/>
    <class name="MN:Text:Table"/>
    <class name="MN:Tooltips"/>

    <interface name="GNOME:MailNotification"/>

    <if test="WITH_MBOX">
      <class name="MN:Mbox:Mailbox:Backend"/>
    </if>

    <if test="WITH_MOZILLA">
      <class name="MN:Mozilla:Mailbox:Backend"/>
    </if>

    <if test="WITH_MBOX_OR_MOZILLA">
      <class name="MN:Base:Mbox:Mailbox:Backend"/>
    </if>

    <if test="WITH_MH">
      <class name="MN:MH:Mailbox:Backend"/>
    </if>

    <if test="WITH_MAILDIR">
      <class name="MN:Maildir:Mailbox:Backend"/>
    </if>

    <if test="WITH_POP3">
      <module name="mn-md5"/>
      <class name="MN:POP3:Mailbox"/>
      <class name="MN:POP3:Mailbox:Properties"/>
    </if>

    <if test="WITH_IMAP">
      <class name="MN:IMAP:Mailbox"/>
      <class name="MN:IMAP:Mailbox:Properties"/>
    </if>

    <if test="WITH_POP3_OR_IMAP">
      <module name="mn-client-session"/>
      <class name="MN:Auth:Combo:Box"/>
      <class name="MN:PI:Mailbox"/>
      <class name="MN:PI:Mailbox:Properties"/>
    </if>

    <if test="WITH_POP3_OR_IMAP_OR_GMAIL">
      <class name="MN:Authenticated:Mailbox"/>
      <class name="MN:Authenticated:Mailbox:Properties"/>
    </if>

    <if test="WITH_SYLPHEED">
      <class name="MN:Sylpheed:Mailbox:Backend"/>
    </if>

    <if test="WITH_GMAIL">
      <class name="MN:Gmail:Mailbox"/>
      <class name="MN:Gmail:Mailbox:Properties"/>
    </if>

    <if test="WITH_MBOX_OR_MOZILLA_OR_MH_OR_MAILDIR_OR_SYLPHEED">
      <class name="MN:Custom:VFS:Mailbox"/>
      <class name="MN:System:VFS:Mailbox"/>
      <class name="MN:System:VFS:Mailbox:Properties"/>
      <class name="MN:VFS:Mailbox"/>
      <class name="MN:VFS:Mailbox:Backend"/>
      <class name="MN:VFS:Message"/>
    </if>

    <if test="WITH_MBOX_OR_MOZILLA_OR_MH_OR_MAILDIR_OR_SYLPHEED_OR_EVOLUTION">
      <class name="MN:Reentrant:Mailbox"/>
    </if>

    <if test="WITH_MIME">
      <package name="gmime"/>
      <module name="mn-message-mime"/>
      <class name="MN:GMime:Stream:VFS"/>
    </if>

    <if test="WITH_SSL">
      <package name="openssl"/>
      <module name="mn-ssl"/>
    </if>

    <if test="WITH_SASL">
      <package name="sasl"/>
      <module name="mn-sasl"/>
    </if>

    <if test="WITH_EVOLUTION">
      <cppflags>$(EVOLUTION_PLUGIN_CFLAGS)</cppflags>

      <source name="mn-evolution.h"/>

      <module name="mn-evolution-glue-client"/>

      <class name="MN:Bonobo:Unknown"/>
      <class name="MN:Evolution:Mailbox"/>
      <class name="MN:Evolution:Mailbox:Properties"/>
      <class name="MN:Evolution:Message"/>

      <interface name="GNOME:MailNotification:Evolution"/>
    </if>
  </program>

  <if test="WITH_EVOLUTION">
    <library name="liborg-jylefort-mail-notification.la" dir="evolution_plugin">
      <cppflags>$(WARN_CFLAGS)</cppflags>
      <cppflags>$(DEBUG_CFLAGS)</cppflags>
      <cppflags>-I$(top_srcdir)</cppflags>
      <cppflags>-DG_LOG_DOMAIN="\"$(PACKAGE)\""</cppflags>

      <ldflags>-avoid-version -module</ldflags>

      <package name="evolution-plugin"/>

      <source name="mn-evolution-plugin.c"/>
      <source name="mn-evolution.h"/>

      <class name="MN:Evolution:Folder:Tree:Control"/>
      <class name="MN:Evolution:Glue"/>

      <interface name="GNOME:MailNotification:Evolution"/>
    </library>
  </if>
</makefile>
